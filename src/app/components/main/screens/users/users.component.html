<div class="container">
  <div class="row">
    <div class="text-center mt-3">
      <h2>
        Your matches -
        {{ memberService.paginatedResult()?.pagination?.totalItems }}
      </h2>
    </div>

    <div class="container mt-3">
      <form
        #form="ngForm"
        class="d-flex justify-content-center"
        (ngSubmit)="getUsers()"
      >
        <div class="d-flex mx-2">
          <label class="col-form-label">Age from:</label>
          <input
            type="number"
            class="form-control ms-1"
            style="width: 70px"
            name="minAge"
            [(ngModel)]="memberService.userParams().minAge"
          />
        </div>

        <div class="d-flex mx-2">
          <label class="col-form-label">Age to:</label>
          <input
            type="number"
            class="form-control ms-1"
            style="width: 70px"
            name="maxAge"
            [(ngModel)]="memberService.userParams().maxAge"
          />
        </div>

        <div class="d-flex mx-2">
          <label class="col-form-label">Show:</label>
          <select
            name="gender"
            style="width: 130px"
            class="form-select ms-1"
            [(ngModel)]="memberService.userParams().gender"
          >
            @for (gender of genderList; track $index) {
            <option [value]="gender.value">
              {{ gender.display }}
            </option>
            }
          </select>
        </div>

        <button class="btn btn-primary ms-1" type="submit">Apply Filter</button>
        <button
          class="btn btn-info ms-1"
          type="button"
          (click)="resetFilters()"
        >
          Reset Filter
        </button>

        <div class="col">
          <div class="btn-group float-end">
            <button
              type="button"
              class="btn btn-primary"
              name="orderBy"
              (click)="getUsers()"
              btnRadio="lastActive"
              [(ngModel)]="memberService.userParams().orderBy"
            >
              Last Active
            </button>

            <button
              type="button"
              class="btn btn-primary"
              name="orderBy"
              (click)="getUsers()"
              btnRadio="created"
              [(ngModel)]="memberService.userParams().orderBy"
            >
              New User
            </button>
          </div>
        </div>
      </form>
    </div>

    @for (user of memberService.paginatedResult()?.items; track user.id) {
    <div class="col-lg-2 col-md-3 col-sm-6 mt-4 mx-auto">
      <app-card [userData]="user"></app-card>
    </div>
    }
  </div>

  @if (memberService.paginatedResult()?.pagination) {
  <div class="row">
    <div
      class="col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center my-5"
    >
      <pagination
        [boundaryLinks]="true"
        [totalItems]="(memberService.paginatedResult()?.pagination)!.totalItems"
        [itemsPerPage]="
          (memberService.paginatedResult()?.pagination)!.itemsPerPage
        "
        (pageChanged)="pageChanged($event)"
        [maxSize]="10"
        [(ngModel)]="(memberService.paginatedResult()?.pagination)!.currentPage"
        previousText="&lsaquo;"
        nextText="&rsaquo;"
        firstText="&laquo;"
        lastText="&raquo;"
      >
      </pagination>
    </div>
  </div>
  }
</div>
